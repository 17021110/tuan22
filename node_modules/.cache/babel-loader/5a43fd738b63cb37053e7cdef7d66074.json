{"ast":null,"code":"var _jsxFileName = \"/Users/tuan/Documents/reactjs/tuan22/src/components/Container.js\";\nimport React, { useState } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport ItemTypes from \"./ItemTypes\";\nimport Item from \"./Items\";\nimport { data } from \"./data\";\nimport _ from \"lodash\";\nimport Homepage from \"./Homepage\";\n\nconst Container = ({\n  listItem,\n  show,\n  hideSourceOnDrag\n}) => {\n  const [list, setList] = useState([]);\n  const newlist = listItem.filter(l => l.show === true);\n  const length = newlist.length;\n  const legth1 = listItem.length; // console.log(length)\n  // console.log(listItem)\n  // const [id,setId]=useState('');\n\n  const [hasDropped, setHasDropped] = useState(false);\n  const [, drop] = useDrop({\n    accept: ItemTypes.ITEM,\n\n    drop(item, monitor) {\n      const didDrop = monitor.didDrop(); // console.log(didDrop)\n\n      if (didDrop) {\n        console.log('drop');\n        return;\n      }\n\n      const delta = monitor.getClientOffset(); // console.log('tuan',delta)\n\n      const left = Math.round(delta.x);\n      console.log(left);\n      const id = list.length + 50;\n      const top = Math.round(delta.y);\n\n      if (item.source === \"dustbin\") {\n        if (left > 200 && left <= 1450) {\n          moveItem(item, left, top, id);\n          return;\n        } else {\n          removeItem(item);\n        }\n      }\n\n      if (item.source === \"list\") {\n        // const id1=list.length+50;\n        // setId(id1);\n        addItem(item, left, top, id);\n      }\n\n      setHasDropped(true);\n      return undefined;\n    },\n\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      isOverCurrent: monitor.isOver({\n        shallow: true\n      })\n    })\n  });\n\n  const addItem = (item, left, top, id) => {\n    setList(list.concat({ ...item,\n      source: \"dustbin\",\n      left,\n      top,\n      id\n    }));\n  };\n\n  const moveItem = (item, left, top) => {\n    console.log(list); // console.log(item)\n\n    let index = _.findIndex(list, o => o.id === item.id);\n\n    console.log(index);\n    setList([..._.slice(list, 0, index), { ...item,\n      source: \"dustbin\",\n      left,\n      top\n    }, ..._.slice(list, index + 1)]);\n  };\n\n  const removeItem = item => {\n    // console.log(item)\n    // console.log(id)\n    // console.log(list)\n    let indexList = _.findIndex(list, o => o.id === item.id);\n\n    list.splice(indexList, 1); // console.log(list)\n  };\n\n  const remoteAllitems = () => {\n    // console.log('xoa het')\n    // console.log(list)\n    setList([]);\n  };\n\n  const CombinDrop = (itemFirst, itemSecond) => {\n    let a = itemFirst.name + \" \" + itemSecond.name;\n\n    let b = _.find(data, item => a === item.condition);\n\n    return b;\n  };\n\n  const combine = (itemFirst, itemSecond) => {\n    const combineItem = CombinDrop(itemFirst, itemSecond);\n    const combineItem1 = CombinDrop(itemSecond, itemFirst);\n\n    if (combineItem) {\n      let indexList = _.lastIndexOf(list, itemFirst);\n\n      let newItem = [..._.slice(list, 0, indexList), { ...combineItem,\n        source: \"dustbin\",\n        left: itemFirst.left,\n        top: itemFirst.top,\n        type: ItemTypes.ITEM\n      }, ..._.slice(list, indexList + 1)];\n      setList([...newItem]);\n      show(combineItem);\n    } else {\n      if (combineItem1) {\n        let indexList1 = _.lastIndexOf(list, itemFirst);\n\n        let newItem1 = [..._.slice(list, 0, indexList1), { ...combineItem1,\n          source: \"dustbin\",\n          left: itemFirst.left,\n          top: itemFirst.top,\n          type: ItemTypes.ITEM\n        }, ..._.slice(list, indexList1 + 1)];\n        setList([...newItem1]);\n        show(combineItem1);\n      }\n    }\n\n    hasDropped && console.log(list);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: drop,\n    className: \"dustbin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, listItem.length !== 0 && list.map((item, index) => {\n    const {\n      left,\n      top,\n      id\n    } = item;\n    console.log(removeItem);\n    return /*#__PURE__*/React.createElement(Item, {\n      key: index,\n      item: item,\n      source: \"dustbin\",\n      combine: combine,\n      left: left,\n      top: top,\n      hideSourceOnDrag: hideSourceOnDrag,\n      id: id,\n      removeItem: removeItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    });\n  }), hasDropped && setHasDropped(false), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, \"Total:\", length, \"/\", legth1), /*#__PURE__*/React.createElement(Homepage, {\n    remote: remoteAllitems,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Container;","map":{"version":3,"sources":["/Users/tuan/Documents/reactjs/tuan22/src/components/Container.js"],"names":["React","useState","useDrop","ItemTypes","Item","data","_","Homepage","Container","listItem","show","hideSourceOnDrag","list","setList","newlist","filter","l","length","legth1","hasDropped","setHasDropped","drop","accept","ITEM","item","monitor","didDrop","console","log","delta","getClientOffset","left","Math","round","x","id","top","y","source","moveItem","removeItem","addItem","undefined","collect","isOver","isOverCurrent","shallow","concat","index","findIndex","o","slice","indexList","splice","remoteAllitems","CombinDrop","itemFirst","itemSecond","a","name","b","find","condition","combine","combineItem","combineItem1","lastIndexOf","newItem","type","indexList1","newItem1","map"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport ItemTypes from \"./ItemTypes\";\nimport Item from \"./Items\";\nimport { data } from \"./data\";\nimport _ from \"lodash\";\nimport Homepage from \"./Homepage\";\n\nconst Container = ({ listItem, show, hideSourceOnDrag }) => {\n  const [list, setList] = useState([]); \n  const newlist = listItem.filter(l => l.show===true);\n  const length=newlist.length;\n  const legth1=listItem.length;\n  // console.log(length)\n  // console.log(listItem)\n  // const [id,setId]=useState('');\n  const [hasDropped, setHasDropped] = useState(false);\n  const [, drop] = useDrop({\n    accept: ItemTypes.ITEM,\n    drop(item, monitor) {\n      const didDrop = monitor.didDrop();\n      // console.log(didDrop)\n      if (didDrop) {\n        console.log('drop')\n        \n        return;\n        \n      }\n      const delta = monitor.getClientOffset();\n      // console.log('tuan',delta)\n      const left = Math.round(delta.x);\n      console.log(left)\n      const id=list.length+50;\n      const top = Math.round(delta.y);\n      if (item.source === \"dustbin\") {\n        if(left>200&&left<=1450 ){\n        moveItem(item, left, top,id);\n        return;\n      }\n      else  {\n        \n        removeItem(item)\n\n      } \n      }\n      if (item.source === \"list\") {\n        // const id1=list.length+50;\n        // setId(id1);\n        addItem(item, left, top,id);\n        \n      }\n\n      setHasDropped(true);\n       return undefined;\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      isOverCurrent: monitor.isOver({ shallow: true })\n    })\n  });\n  const addItem = (item, left, top,id) => {\n   \n    setList(list.concat({ ...item, source: \"dustbin\", left, top,id }));\n   \n   \n   \n  };\n  const moveItem = (item, left, top) => {\n    console.log(list)\n    // console.log(item)\n    let index =_.findIndex(list,o=>o.id===item.id)   \n    console.log(index)\n    setList(\n      [\n        ..._.slice(list, 0, index),\n        { ...item, source: \"dustbin\", left, top},\n        ..._.slice(list, index + 1)\n      ]\n    );\n    \n  };\n  const removeItem=(item)=>{\n    // console.log(item)\n    // console.log(id)\n    // console.log(list)\n    let indexList = _.findIndex(list, o=>o.id === item.id );\n   \n    list.splice(indexList,1)\n    // console.log(list)\n\n    \n  }\n\n \n  const remoteAllitems=()=>{\n    // console.log('xoa het')\n    // console.log(list)\n    setList([]);\n    \n  }\n  const CombinDrop = (itemFirst, itemSecond) => {\n    let a = itemFirst.name + \" \" + itemSecond.name;\n    let b = _.find(data, item => a === item.condition);\n    \n    return b;\n  };\n  const combine = (itemFirst, itemSecond) => {\n   \n    const combineItem = CombinDrop(itemFirst, itemSecond);\n    const combineItem1= CombinDrop(itemSecond,itemFirst)\n    if (combineItem) {\n      let indexList = _.lastIndexOf(list, itemFirst);\n      let newItem = [\n        ..._.slice(list, 0, indexList),\n        {\n          ...combineItem,\n          source: \"dustbin\",\n          left: itemFirst.left,\n          top: itemFirst.top,\n          type: ItemTypes.ITEM\n        },\n        ..._.slice(list, indexList + 1)\n      ];\n      setList([...newItem]);\n      show(combineItem);\n    }\n    else{\n      if(combineItem1){\n        let indexList1 = _.lastIndexOf(list, itemFirst);\n        let newItem1 = [\n          ..._.slice(list, 0, indexList1),\n          {\n            ...combineItem1,\n            source: \"dustbin\",\n            left: itemFirst.left,\n            top: itemFirst.top,\n            type: ItemTypes.ITEM\n          },\n          ..._.slice(list, indexList1 + 1)\n        ];      \n        setList([...newItem1]);\n        show(combineItem1);\n      }\n    }\n\n    hasDropped && console.log(list);\n  };\n\n  return (\n    <div ref={drop} className=\"dustbin\">\n     \n      {listItem.length !== 0 &&\n        list.map((item, index) => {\n          const { left, top,id } = item;\n          console.log(removeItem)\n          return (\n            <Item\n              key={index}\n              item={item}\n              source=\"dustbin\"\n              combine={combine}\n              left={left}\n              top={top}\n              hideSourceOnDrag={hideSourceOnDrag}\n              id={id}\n              removeItem={removeItem}\n              \n            />\n            \n          );\n        })}\n      {hasDropped && setHasDropped(false)}\n      <div className='total'>Total:{length}/{legth1}</div>\n        <Homepage\n          \n          remote={remoteAllitems}\n        />\n    </div>\n  );\n};\n\nexport default Container;\n"]},"metadata":{},"sourceType":"module"}